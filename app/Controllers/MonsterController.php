<?php

namespace App\Controllers;

use Alisa\Context;
use Alisa\Support\Markup;
use Alisa\Yandex\Types\Button;

use function Alisa\Support\Helpers\mb_ucfirst;

class MonsterController
{
    public function search(Context $context)
    {
        user()->increment('monster_search_count');

        $slot = $context->intents('MONSTER.SEARCH', 'monster');
        $monster = $slot ? $slot['value'] : 'Ğ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ¾Ğ²';

        $slot = $context->intents('MONSTER.SEARCH', 'place');
        $place = $slot ? $slot['value'] : 'Ğ² ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğµ';

        $line1 = Markup::variant([
            "{rand:ğŸ”|ğŸ‘€|ğŸ‘Œ|ğŸ‘} {rand:Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€ÑƒÑ|Ğ˜Ñ‰Ñƒ} {$monster} {$place}...",
            "{rand:ğŸ”|ğŸ‘€|ğŸ‘Œ|ğŸ‘} ĞĞ°Ñ‡Ğ¸Ğ½Ğ°Ñ {rand:ÑĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ|Ğ¸ÑĞºĞ°Ñ‚ÑŒ|Ğ¿Ğ¾Ğ¸ÑĞº} {$monster} {$place}...",
            "{rand:ğŸ”|ğŸ‘€|ğŸ‘Œ|ğŸ‘} Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑ Ğ¿Ğ¾Ğ¸ÑĞº {$monster} {$place}...",
        ]);

        $lineDo = Markup::variant([
            "ğŸ‘€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑÑ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ {rand:ÑĞ°Ğ½Ñ‚Ğ¸Ğ¼ĞµÑ‚Ñ€|Ğ¼ĞµÑ‚Ñ€|ÑƒĞ³Ğ¾Ğ»|ÑƒĞ³Ğ¾Ğ»Ğ¾Ğº} {$place}...",
            "ğŸ‘€ Ğ—Ğ°Ğ³Ğ»ÑĞ´Ñ‹Ğ²Ğ°Ñ Ğ² ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑƒĞ³Ğ¾Ğ»Ğ¾Ğº...",
            "ğŸ‘€ Ğ—Ğ°Ğ³Ğ»ÑĞ´Ñ‹Ğ²Ğ°Ñ Ğ² ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑƒĞ³Ğ¾Ğ»Ğ¾Ğº {$place}...",
            "ğŸ‘€ Ğ’Ğ½Ğ¸Ğ¼Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ²ÑÑ‘ Ğ¾ÑĞ¼Ğ°Ñ‚Ñ€Ğ¸Ğ²Ğ°Ñ...",
            "ğŸ‘€ ĞĞµ ÑƒĞ¿ÑƒÑ‰Ñƒ Ğ½Ğ¸ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ÑƒĞ³Ğ¾Ğ»ĞºĞ°...",
            "ğŸ‘€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑÑ Ğ²ÑĞµ ÑƒĞ³Ğ¾Ğ»ĞºĞ¸ Ğ¸ Ñ‰ĞµĞ»Ğ¾Ñ‡ĞºĞ¸...",
            "ğŸ‘€ Ğ—Ğ°Ğ³Ğ»ÑĞ´Ñ‹Ğ²Ğ°Ñ Ğ² ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑƒĞ³Ğ¾Ğ» Ğ¸ Ğ¿Ğ¾Ğ´ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚...",
        ]);

        $lineFinish = Markup::variant([
            "ğŸ˜‹ Ğ•Ñ‰Ñ‘ {rand:Ñ‡ÑƒÑ‚ÑŒ-Ñ‡ÑƒÑ‚ÑŒ|Ğ½ĞµĞ¼Ğ½Ğ¾Ğ³Ğ¾|Ğ½ĞµĞ¼Ğ½Ğ¾Ğ¶ĞºĞ¾}...",
            "ğŸ˜‹ ĞŸĞ¾Ñ‡Ñ‚Ğ¸ Ğ²ÑÑ‘ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾...",
            "ğŸ˜‹ Ğ—Ğ°ĞºĞ°Ğ½Ñ‡Ğ¸Ğ²Ğ°Ñ {rand:Ğ¿Ğ¾Ğ¸ÑĞºĞ¸|ÑĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ}...",
            "ğŸ˜‹ Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ°Ñ {rand:Ğ¿Ğ¾Ğ¸ÑĞºĞ¸|ÑĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ}...",
        ]);

        $Place = mb_ucfirst($place);
        $Monster = mb_ucfirst($monster);

        $line2 = Markup::variant([
            "ğŸ‰ {rand:Ğ£Ñ€+Ğ°-Ğ°|Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾|Ğ¥Ğ¾Ğ¿-Ñ…Ğ¾Ğ¿|Ğ¥+Ğ¾Ğ¿Ñ‡Ğ¸Ğº|Ğ¤ÑƒÑ…}! Ğ¯ Ğ½Ğµ Ğ½Ğ°ÑˆĞ»Ğ° ğŸ‘» {$monster} {$place}, Ğ½Ğ¸ĞºĞ¾Ğ³Ğ¾ Ğ½ĞµÑ‚, Ğ²ÑÑ‘ {rand:Ñ‡Ğ¸ÑÑ‚Ğ¾|ÑĞ¿Ğ¾ĞºĞ¾Ğ¹Ğ½Ğ¾|Ñ‚+Ğ¸Ğ¿-Ñ‚+Ğ¾Ğ¿|Ñ‡+Ğ¸ĞºĞ¸-Ğ¿+ÑƒĞºĞ¸}! {rand:ğŸ¥³|ğŸ˜|ğŸ°|ğŸŒ¸|ğŸ¸|ğŸ¥|ğŸ£}",
            "ğŸ‰ {rand:Ğ£Ñ€+Ğ°-Ğ°|Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾|Ğ¥Ğ¾Ğ¿-Ñ…Ğ¾Ğ¿|Ğ¥+Ğ¾Ğ¿Ñ‡Ğ¸Ğº|Ğ¤ÑƒÑ…}! Ğ—Ğ´ĞµÑÑŒ Ğ²ÑÑ‘ {rand:Ñ‡Ğ¸ÑÑ‚Ğ¾|ÑĞ¿Ğ¾ĞºĞ¾Ğ¹Ğ½Ğ¾|Ñ‚+Ğ¸Ğ¿-Ñ‚+Ğ¾Ğ¿|Ñ‡+Ğ¸ĞºĞ¸-Ğ¿+ÑƒĞºĞ¸} Ğ¸ Ğ½Ğ¸ĞºĞ¾Ğ³Ğ¾ Ğ½ĞµÑ‚, Ñ {rand:Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ğ»Ğ°|ÑƒĞ·Ğ½Ğ°Ğ»Ğ°|Ğ¿Ñ€Ğ¾ÑĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ»Ğ°}! {rand:ğŸ¥³|ğŸ˜|ğŸ°|ğŸŒ¸|ğŸ¸|ğŸ¥|ğŸ£}",
            "ğŸ‰ {rand:Ğ£Ñ€+Ğ°-Ğ°|Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾|Ğ¥Ğ¾Ğ¿-Ñ…Ğ¾Ğ¿|Ğ¥+Ğ¾Ğ¿Ñ‡Ğ¸Ğº|Ğ¤ÑƒÑ…}! {$Place} Ğ²ÑÑ‘ {rand:Ñ‡Ğ¸ÑÑ‚Ğ¾|ÑĞ¿Ğ¾ĞºĞ¾Ğ¹Ğ½Ğ¾|Ñ‚+Ğ¸Ğ¿-Ñ‚+Ğ¾Ğ¿|Ñ‡+Ğ¸ĞºĞ¸-Ğ¿+ÑƒĞºĞ¸} Ğ¸ Ğ½Ğ¸ĞºĞ¾Ğ³Ğ¾ Ğ½ĞµÑ‚, Ñ {rand:Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ğ»Ğ°|ÑƒĞ·Ğ½Ğ°Ğ»Ğ°|Ğ¿Ñ€Ğ¾ÑĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ»Ğ°}! {rand:ğŸ¥³|ğŸ˜|ğŸ°|ğŸŒ¸|ğŸ¸|ğŸ¥|ğŸ£}",
            "ğŸ‰ {rand:Ğ£Ñ€+Ğ°-Ğ°|Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾|Ğ¥Ğ¾Ğ¿-Ñ…Ğ¾Ğ¿|Ğ¥+Ğ¾Ğ¿Ñ‡Ğ¸Ğº|Ğ¤ÑƒÑ…}! ĞĞ¸ĞºĞ¾Ğ³Ğ¾ Ğ½ĞµÑ‚, Ğ²ÑÑ‘ {rand:Ñ‡Ğ¸ÑÑ‚Ğ¾|ÑĞ¿Ğ¾ĞºĞ¾Ğ¹Ğ½Ğ¾|Ñ‚+Ğ¸Ğ¿-Ñ‚+Ğ¾Ğ¿|Ñ‡+Ğ¸ĞºĞ¸-Ğ¿+ÑƒĞºĞ¸}! {rand:ğŸ¥³|ğŸ˜|ğŸ°|ğŸŒ¸|ğŸ¸|ğŸ¥|ğŸ£}",
            "ğŸ‰ {rand:Ğ£Ñ€+Ğ°-Ğ°|Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾|Ğ¥Ğ¾Ğ¿-Ñ…Ğ¾Ğ¿|Ğ¥+Ğ¾Ğ¿Ñ‡Ğ¸Ğº|Ğ¤ÑƒÑ…}! {$Monster} ğŸ‘» Ğ½Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚, Ğ²ÑÑ‘ {rand:Ñ‡Ğ¸ÑÑ‚Ğ¾|ÑĞ¿Ğ¾ĞºĞ¾Ğ¹Ğ½Ğ¾|Ñ‚+Ğ¸Ğ¿-Ñ‚+Ğ¾Ğ¿|Ñ‡+Ğ¸ĞºĞ¸-Ğ¿+ÑƒĞºĞ¸}! {rand:ğŸ¥³|ğŸ˜|ğŸ°|ğŸŒ¸|ğŸ¸|ğŸ¥|ğŸ£}",
        ]);

        $line3 = Markup::variant([
           'Ğ ĞµÑĞ»Ğ¸ Ñ‡Ñ‚Ğ¾, Ñ Ğ²ÑĞµĞ³Ğ´Ğ° Ñ€ÑĞ´Ğ¾Ğ¼ Ğ¸ {rand:Ğ·Ğ°Ñ‰Ğ¸Ñ‰Ğ°Ñ|Ğ·Ğ°Ñ‰Ğ¸Ñ‰Ñƒ|Ğ½Ğµ Ğ´Ğ°Ğ¼ Ğ² Ğ¾Ğ±Ğ¸Ğ´Ñƒ} Ñ‚ĞµĞ±Ñ â¤ï¸',
           'Ğ˜ ĞµÑĞ»Ğ¸ Ñ‡Ñ‚Ğ¾, Ñ Ğ²ÑĞµĞ³Ğ´Ğ° {rand:Ğ·Ğ°Ñ‰Ğ¸Ñ‰Ğ°Ñ|Ğ·Ğ°Ñ‰Ğ¸Ñ‰Ñƒ} Ñ‚ĞµĞ±Ñ â¤ï¸',
        ]);

        $context->reply("
            {$line1}

            ğŸ¶ğŸ¶ğŸ¶

            {audio:alice-music-tambourine-80bpm-1}

            {$lineDo}

            ğŸ¶ğŸ¶ğŸ¶

            {audio:alice-music-tambourine-80bpm-1}

            {$lineFinish}

            {audio:alice-music-tambourine-100bpm-1}

            ğŸ¶ğŸ¶ğŸ¶

            {audio:alice-sounds-human-kids-1}

            {$line2}

            {$line3}
        ", buttons: [
            new Button('Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾'),
            new Button('ĞŸĞ¾Ğ¸Ñ‰Ğ¸ ĞµÑ‰Ñ‘ Ñ€Ğ°Ğ·'),
            new Button('Ğ¥Ğ²Ğ°Ñ‚Ğ¸Ñ‚'),
        ]);
    }
}

